<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Map</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
        * {
            margin:0;
            padding:0;
        }
        #map {
            height:500px;
            width:100%;
        }
    </style>
  </head>
  <body>
    <div class="main__content">
        <button class="main__btn"><a href="index.html">Back to Mainpage</a></button>
      </div>
    <div class="map" id="map"></div>
    <script type="text/javascript">
        var map;
        var InfoObj=[];
        var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
        var centerCords={
            lat:39.9522,
            lng:-75.1932
        };

        var icons={
            event:{
                icon:'https://www.pradipdebnath.com/wp-content/uploads/2019/12/map-marker-icon.png'
            },
        };

        var markersOnMap =[
            {
                placeName: 'University of Pennsylvania',
                LatLng: [{
                    lat:39.9522, lng:-75.1932
                }],
                type:'event'
            },
            {
                placeName: 'HaverBryn Mawr College',
                LatLng: [{
                    lat:40.0279, lng:-75.3145
                }],
                type:'event'
            },
            {
                placeName: 'Haverford College',
                LatLng: [{
                    lat:40.0093, lng:-75.3077
                }],
                type:'event'
            },
            {
                placeName: 'Allegheny College',
                LatLng: [{
                    lat:41.6485, lng:-80.1455
                }],
                type:'event'
            },
            {
                placeName: 'Bucknell University',
                LatLng: [{
                    lat:40.9548, lng:-76.8851
                }],
                type:'event'
            },
            {
                placeName: 'Carnegie Mellon University',
                LatLng: [{
                    lat:40.4427, lng:-79.9430
                }],
                type:'event'
            },
            {
                placeName: 'Dickinson College',
                LatLng: [{
                    lat:40.2027, lng:-77.2008
                }],
                type:'event'
            },
            {
                placeName: 'Drexel University',
                LatLng: [{
                    lat:39.9566, lng:-75.1899
                }],
                type:'event'
            }
        ];
        windows.onload=function(){
            initMap();
        };

        function addMarkerInfo(){
            for (var i=0;i<markersOnMap.length;i++) {
                var contentString='<h3>'+markersOnMap[i].placeName+'</h3>'+'<button class="main__btn"><a href="firstUni.html">More Info</a></button>';

                const marker=new google.maps.Marker({
                    position:markersOnMap[i].LatLng[0],
                    icon:icons[markersOnMap[i].type].icon,
                    map:map
                });

                const infowindow=new google.maps.InfoWindow({
                    content:contentString,
                });

                marker.addListener('click',function() {
                    closeOtherInfo();
                    infowindow.open(map,marker);
                    InfoObj[0]=infowindow;
                });
            }
        }

        function closeOtherInfo(){
            if (InfoObj.length>0){
                InfoObj[0].set("marker",null);
                InfoObj[0].close();
                InfoObj[0].length=0;
            }
        }

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"),{
                zoom:10,
                center: centerCords
            });
            addMarkerInfo();
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-OABpnyG3-PSv288lxYCY62eKdPdt4Kk&callback=initMap" ></script>
  </body>
</html>